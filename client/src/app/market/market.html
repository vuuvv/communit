<v-page class="page-market">
  <v-searchbar slot="header" (submit)="search($event)"></v-searchbar>
  <tabbar slot="footer"></tabbar>

  <div class="quickentry-nav ngv-1px-b" *ngIf="categories && categories.length">
    <v-xscroll class="main-nav">
      <quickentry-item class="ngv-xscroll-item" [icon]="c.icon | fixurl" *ngFor="let c of categories" (click)="goto(c)">{{ c.name }}</quickentry-item>
    </v-xscroll>
  </div>

  <empty-page *ngIf="!products || !products.length">暂无内容</empty-page>
  <div class="product-list ngv-bg-white">
    <product-list-item
      class="ngv-1px-b"
      [product]="p"
      [full]="false"
      [routerLink]="['./product/' + p.id]"
      *ngFor="let p of products"
    >
   </product-list-item>
  </div>
</v-page>

<div *ngIf="showMask" class="ngv-overlay">
  <div class="weui-mask"></div>
  <div class="quickentry-nav qe" *ngIf="categories">
    <quickentry *ngFor="let chunk of categories | slice: 0:-1 | chunk: 4">
      <quickentry-item [icon]="icon.icon | fixurl" (click)="goto(icon)" *ngFor="let icon of chunk">
        {{ icon.name }}
      </quickentry-item>
    </quickentry>
  </div>
  <div class="close" (click)="showMask=false">
    <v-icon type="close"></v-icon>
  </div>
</div>

